name: Deploy to Firebase Functions

on:
  push:
    branches:
      - main

jobs:
  deploy:
    name: Deploy Functions
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Setup Node.js 18
        uses: actions/setup-node@v3
        with:
          node-version: '18'
      
      - name: Install dependencies
        run: |
          cd functions
          npm ci
      
      - name: Create service account file
        run: echo '${{ secrets.FIREBASE_SERVICE_ACCOUNT }}' > $HOME/gcloud-service-key.json
      
      - name: Deploy to Firebase
        run: |
          npm install -g firebase-tools
          export GOOGLE_APPLICATION_CREDENTIALS="$HOME/gcloud-service-key.json"
          firebase deploy --only functions --project albourakh-sn-ok
```

### **Ã‰tape 5 : Commit le fichier**

1. En bas de la page, dans "Commit new file"
2. Titre : `feat: Add automatic Firebase deployment`
3. Cliquez sur **"Commit new file"** (bouton vert)

---

## ğŸ‰ **Ã‡A VA SE LANCER AUTOMATIQUEMENT !**

DÃ¨s que vous cliquez sur "Commit", GitHub Actions va :

1. âœ… DÃ©tecter le nouveau commit
2. âœ… Lancer le workflow
3. âœ… Installer les dÃ©pendances
4. âœ… DÃ©ployer vers Firebase
5. âœ… Les 2 fonctions seront en ligne !

---

## ğŸ“Š **SUIVRE LE DÃ‰PLOIEMENT**

AprÃ¨s le commit :

1. Allez sur l'onglet **"Actions"** de votre repo
2. Vous verrez le workflow en cours : **"Deploy to Firebase Functions"**
3. Cliquez dessus pour voir les logs en temps rÃ©el

---

## â±ï¸ **TIMELINE**
```
T+0s      â†’ Commit du fichier workflow
T+10s     â†’ GitHub Actions dÃ©marre
T+30s     â†’ Installation des dÃ©pendances
T+2min    â†’ DÃ©ploiement vers Firebase
T+3min    â†’ âœ… SUCCÃˆS !
